# vim: ft=nu

register @gstat@/bin/nu_plugin_gstat

# @nu_scripts@/share/custom-completions | where type == dir | each { |dir| $"($dir.name)/($dir.name | split row '/' | last)-completions.nu" }
use @nu_scripts@/share/nu_scripts/custom-completions/git/git-completions.nu *
use @nu_scripts@/share/nu_scripts/custom-completions/nix/nix-completions.nu *
use @nu_scripts@/share/nu_scripts/custom-completions/cargo/cargo-completions.nu *
use @nu_scripts@/share/nu_scripts/custom-completions/just/just-completions.nu *
use @nu_scripts@/share/nu_scripts/custom-completions/make/make-completions.nu *

$env.config = {
    shell_integration: true
    show_banner: false
    cursor_shape: {
        emacs: block # block, underscore, line, blink_block, blink_underscore, blink_line (line is the default)
        vi_insert: block # block, underscore, line , blink_block, blink_underscore, blink_line (block is the default)
        vi_normal: underscore # block, underscore, line, blink_block, blink_underscore, blink_line (underscore is the default)
    }
    hooks: {
        pre_prompt: [{ ||
            let direnv = (direnv export json | from json)
            let direnv = if ($direnv | length) == 1 { $direnv } else { {} }
            $direnv | load-env
        }]
  }
}

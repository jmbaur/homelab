# vim: ft=nu

# use @nu_scripts@/share/nu_scripts/custom-completions/cargo/cargo-completions.nu *
# use @nu_scripts@/share/nu_scripts/custom-completions/git/git-completions.nu *
# use @nu_scripts@/share/nu_scripts/custom-completions/just/just-completions.nu *
# use @nu_scripts@/share/nu_scripts/custom-completions/make/make-completions.nu *
# use @nu_scripts@/share/nu_scripts/custom-completions/nix/nix-completions.nu *
# use @nu_scripts@/share/nu_scripts/custom-completions/zellij/zellij-completions.nu *
use @nu_scripts@/share/nu_scripts/modules/docker/docker.nu *
use @nu_scripts@/share/nu_scripts/modules/git/git.nu *
use @nu_scripts@/share/nu_scripts/modules/maths/math_functions.nu *
use @nu_scripts@/share/nu_scripts/modules/nix/nix.nu *

$env.config = {
    shell_integration: true
    show_banner: false
    history: {
        file_format: "sqlite"
        isolation: true
    }
    cursor_shape: {
        emacs: block
    }
    completions: {
        external: {
            enable: true
            completer: { |spans|
                carapace $spans.0 nushell $spans | from json
            }
        }
    }
    hooks: {
        pre_prompt: [{ ||
            let direnv = (direnv export json | from json)
            let direnv = if ($direnv | length) == 1 { $direnv } else { {} }
            $direnv | load-env
        }]
    }
}
